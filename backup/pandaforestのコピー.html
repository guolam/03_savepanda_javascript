<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/sample.css">
  <title>旅するパンダ</title>
  <link rel="icon" href="img/panda.png">
</head>

<body>
  <header class="header_together">
    <img id="pandahead" src="img/panda.png">
    <h1>旅するパンダ</h1>
  </header>


  <main>
    <!-- カバーページ -->

    <p class="panda_text">
      パンダは森の中で迷子になってます。<br>
      パンダは前進すると食べるしかできないので、<br>
      <br>
      ５クリック以内に、HPが０になったら体力が尽きてしまい、<br>
      何もできなくなります。<br>

      前進することでHP-1になります。<br>
      そして、食べ物を食べると、運がよければHPが上がりますが、<br>
      悪ければクマに襲われて、命の危機に晒されるかもしれません。<br>
      <br>
      さて。５クリックでパンダを森に救出できるか？<br>

    <div class="btn1 btn_panda fit" href="#content">
      Start
    </div>

    </p>

    <!-- メインコンテンツ -->
    <div id="content" style="display:none;">
      <p id="score"></p>
      <div id="result">
        <img id="food" src="img/forest.jpeg">
      </div>

      <p id="step" class="score_gameover">パンダの体力</p>
      <div class="btn">
        <div class="left">
          <img id="eat" src="img/cheese.png">
        </div>
        <div class="right">
          <img id="run" src="img/print.png">
        </div>
      </div>

    </div>
  </main>
  <div id="gameover" style="display:none;">
    <canvas class="canvas" width="300" height="300"></canvas>
    <p>GAME OVER</p>
  </div>

  <footer>
    <small>Panda in the Forest</small>
  </footer>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script>


    //画像を入れる
    const imgapple = document.createElement("img");
    imgapple.src = "img/apple.png";

    const imgbamboo = document.createElement("img");
    imgbamboo.src = "img/bamboo.png";

    const imgbear = document.createElement("img");
    imgbear.src = "img/bear.png";

    const imgsad = document.createElement("img");
    imgsad.src = "img/sad.png";

    const imgpear = document.createElement("img");
    imgpear.src = "img/pear.png";


    //メインのゲームの内容
    // 食べる関数
    // console.log(random_eat);
    let point = 5;
    $("#score").text(point)


    $("#eat").on("click", function () {
      const random_eat = Math.floor(Math.random() * 4);
      // console.log(random_eat)

      if (random_eat === 0) {
        $("#step").text("ゲームオーバー");
        $("#score").text(point -= 50);
        $('#food').attr(imgbear);

      } else if (random_eat === 1) {
        $("#step").text("HP-2");
        $("#score").text(point -= 2);
        $('#food').attr(imgapple);


      } else if (random_eat === 2) {
        $("#step").text("HP+1");
        $("#score").text(point += 1);
        $('#food').attr(imgpear);

      } else {
        $("#step").text("HP+2");
        $("#score").text(point += 2);
        $('#food').attr(imgbamboo);

      }
    });

    // 歩く関数
    $("#run").on("click", function () {
      $("#step").text("HP-1");
      $("#score").text(point -= 1);
      $("#food").attr(imgsad);
    });


    // GAMEOVER処理 > できませんでした。

    // let gameover = ("#score" <= 0);

    // $("#run").on("click", function () {
    //   if (gameover) {
    //     $("#gameover").css("display", "")
    //   }
    // });

    // console.log(gameover)

    // const gameover = $("#score") = 0
    // console.log(gameover)

    //ボタンを押すごとに画面が切り替わる関数
    $(function () {
      $(".btn1").on("click", function () {
        //btnクラスをクリック後の関数処理
        $(this).closest("div").css("display", "none");
        //質問画面にあたらる親要素divをdisplay:none;にする
        id = $(this).attr("href");
        //次の質問hrefをidに格納
        $(id).addClass("fit").fadeIn("slow").show();
        //次の質問にfitをつけて出力。
      })
    });

  </script>

</body>

</html>